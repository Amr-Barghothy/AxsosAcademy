<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Books</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body>
    <nav class="w-90/100 mx-auto flex items-center justify-between flex-wrap border-b-2 pb-5 mt-5">
        <h1 class="font-bold text-3xl">Welcome, {{user.first_name}} </h1>
        <a href="/logout" class="text-blue-400 text-xl underline">Logout</a>
    </nav>
    <div class="w-90/100 mx-auto mt-10 flex">
        <div class="w-20/100">
            <h1 class="font-bold text-3xl">Add a Favorite Book</h1>
            <form action="/add_book" method="post" class="flex flex-col">
                {% csrf_token %}
                <div class="flex my-5">
                    <label for="title" class="w-30">Title</label>
                    <input type="text" name="title" id="title" class="border-2 rounded w-full">
                </div>
                <div class="flex">
                    <label for="desc" class="w-30">Description</label>
                    <textarea name="desc" id="desc" cols="23" rows="5" class="border-2 rounded w-full"></textarea>
                </div>
                <button type="submit"
                        class="self-center border-2 p-1 rounded mt-5 w-1/4 shadow-[2px_2px] cursor-pointer">Add
                </button>
            </form>
            {% if messages %}
            <ul class="mt-10">
                {% for message in messages %}
                <li class="font-bold text-red-600 text-xl">{{message}}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        <div class="w-40/100 mx-auto">
            <h1 class="font-bold text-3xl">ALL Books</h1>
            {% for book in books %}
            <div class="my-5">
                <a href="/books/{{book.id}}" class="underline text-blue-600">{{book.title}}</a>
                <p>Added by {{book.uploaded_by.first_name}} {{book.uploaded_by.last_name}}</p>
                {% if book.is_user_favorite %}
                <p class="font-bold italic">this is one of your favorites</p>
                {% else %}
                <a href="/add_fav/{{book.id}}" class="underline text-blue-500">Add to Favorite</a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>